---
title: "No Evidence of Bias in Arrests Made by the Toronto Police Service"
author: "Aviral Bhardwaj"
abstract: The ethnic identity of citizens arrested by the police has consistently been a topic of discussion, often highlighting the pronounced skewness of certain ethnic identities. This paper seeks to analyze data from the Toronto Open Data Portal to investigate whether there is any bias in arrests made by the Toronto Police Service between 2020 and 2021, while accounting for factors such as age, booked after arrest, and search on arrest. While the population distribution of various ethnic identities varies significantly, it was found that ..... Further analysis can provide valuable insights for policymakers, law enforcement agencies, and community advocates in fostering a more equitable society while emphasizing the importance of promoting transparency and accountability in policing.
date: today
date-format: long
number-sections: true
format: pdf
toc: true
thanks: "Code and data supporting this analysis is available at: https://github.com/Aviral-03/Ethnic-Identity-Arrests-Toronto"
bibliography: references.bib
---

```{r}
#| echo: false
# All the required packages
## Installing Packages only needs to be done once

#install.packages("tidyverse")
#install.packages("tinytex")
#install.packages("opendatatoronto")
# install.packages("kableExtra")
# install.packages("patchwork")
```

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(opendatatoronto)
library(tinytex)
library(knitr)
library(dplyr)
library(ggplot2)
library(janitor)
library(patchwork)
library(kableExtra)
```

```{r}
#| warning: false
#| message: false
#| include: false

# Get package data
	
# get package
package <- show_package("police-race-and-identity-based-data-collection-arrests-strip-searches")
package
 
# get all resources for this package
resources <- list_package_resources("police-race-and-identity-based-data-collection-arrests-strip-searches")
 
# identify datastore resources; by default, Toronto Open Data sets datastore resource format to CSV for non-geospatial and GeoJSON for geospatial resources
datastore_resources <- filter(resources, tolower(format) %in% c('csv', 'geojson'))
 
# load the first datastore resource as a sample
data <- filter(datastore_resources, row_number()==1) %>% get_resource()

# Save the data in CSV
write.csv(data, "../data/raw_data.csv")
```


## Introduction
In the vibrant metropolis of Toronto, the intersection between law enforcement practices and demographic characteristics holds profound implications for community dynamics and public policy. This paper undertakes a comprehensive analysis of arrest data spanning the years 2020 and 2021, seeking to unravel the intricate patterns that shape the city's legal landscape.

Arrest data serves as a vital lens through which we can gain insights into the dynamics of law enforcement activities and their correlation with ethnicity and age. Our inquiry begins with a broad exploration of the distribution of arrests across various age groups, aiming to discern overarching trends and fluctuations. The age spectrum, a fundamental dimension of this analysis, reveals intriguing patterns that underscore the nuanced nature of arrests in Toronto.

As we embark on this exploration, the data prompts critical questions about the socio-cultural, economic, and systemic factors that contribute to these observed patterns. This paper aims to contribute to a nuanced understanding of the dynamics of arrests in Toronto, providing insights that can inform targeted interventions, policy considerations, and community engagement efforts.

## Data 
This data is sourced from the Toronto Open Data Portal `opendatatoronto` [@rOpenDataToronto]. The following data is utilized for a more in-depth analysis of arrests and strip searches involving various ethnic and identity-based groups in Toronto. The information is gathered by the Toronto Police Service (TPS) and is collected under the authority of the Police Services Act. Its purpose is to enhance comprehension of the relationship between the police and the community. The data covers the period from 2020 to 2021.

The data underwent cleaning and analysis using the R programming language [@r]. Cleaning was performed with the `tidyverse` package [@rTidyverse], involving the removal of unnecessary columns for the analysis. Subsequently, analysis was conducted utilizing the `dplyr` package [@rDplyr], with the data grouped by ethnic and identity-based categories. Visualization was then executed using the `ggplot2` package [@rGgplot2], depicting the number of arrests and strip searches across various ethnic and identity-based groups.

The raw dataset comprised 32,000 arrest records spanning both 2020 and 2021, encompassing 26 variables of analyzable data. However, for the analysis in this paper, we narrowed our focus to specific variables, including Arrest Year, Perceived Race, Age Group, Youth at Arrest, Booked, Search Reason Cause Injury, Search Reason Assist Escape, Search Reason Possess Weapons, and Search Reason Possess Evidence. Upon further examination the raw data contained values such as 'NA' under the Booked column and 'None' under the Search column. Using the `mutate` function [@rDplyr], we replaced the 'NA' and `None` values with 0 and 1 to summarize the data. Additionally, we consolidated similar columns, namely Search Reason Cause Injury, Search Reason Assist Escape, Search Reason Possess Weapons, and Search Reason Possess Evidence, into a unified column labeled "Search Reason." The process involved utilizing the `any()` function [@rDplyr], assigning a value of 1 to indicate the presence of any of these search motives.

```{r}
#| warning: false
#| message: false
#| include: false

# Reading the data
data <- read.csv("../data/raw_data.csv")

# Adjusting and cleaning the name of the variable
cleaned_data <- data %>% 
  clean_names() %>% 
  clean_names(case = "snake")

cleaned_data <- cleaned_data |>
  select(
    arrest_year, perceived_race, age_group_at_arrest, youth_at_arrest_under_18_years, booked, search_reason_cause_injury, search_reason_assist_escape, search_reason_possess_weapons, search_reason_possess_evidence)

# Combining the columns that are similar
cleaned_data <- cleaned_data %>%
  mutate(search_reason = case_when(
    search_reason_cause_injury == 1 ~ "1",
    search_reason_assist_escape == 1 ~ "1",
    search_reason_possess_weapons == 1 ~ "1",
    search_reason_possess_evidence == 1 ~ "1",
    TRUE ~ "0"
  ))

# Rename the columns
cleaned_data <- cleaned_data %>%
  rename(
    age_group = age_group_at_arrest,
    youth_at_arrest_under_18_years = youth_at_arrest_under_18_years
  )

# Mutating the date for age groups involving Aged 17 years and younger and Aged 17 years and under essentially they mean the same thing
cleaned_data <- cleaned_data %>%
  mutate(age_group = case_when(
    age_group == "Aged 17 years and younger" ~ "Aged 17 years and under",
    age_group == "Aged 17 years and under" ~ "Aged 17 years and under",
    TRUE ~ age_group
  ))

# Mutating for booked with NA values
cleaned_data <- cleaned_data %>%
  mutate(booked = case_when(
    is.na(booked) ~ "0",
    booked == 1 ~ "1",
    TRUE ~ "Not Booked"
  ))

cleaned_data <- cleaned_data |>
  select(
    arrest_year, perceived_race, age_group, youth_at_arrest_under_18_years, booked, search_reason)

write.csv(cleaned_data, "../data/cleaned_data.csv")

```

```{r}
#| warning: false
#| message: false
#| include: false
# Make a table of the data with the number of arrests and strip searches by ethinic and identity based groups for the year 2020, and 2021
# cleaned_data <- read.csv("../data/cleaned_data.csv")


# List of the ethnic and identity based groups that are in the data
# ethnic_backgrounds <- cleaned_data |> select(perceived_race) |> unique() 

# List of the years that are in the data
# years <- cleaned_data |> select(arrest_year) |> unique()

# List of the age groups that are in the data
# age_groups <- cleaned_data |> select(age_group) |> unique()

# write.csv(cleaned_data, "../data/cleaned_data.csv")
```


### Arrests by Ethnic and Identity-Based Groups for Year 2020 and 2021

Table 1 (@tbl-table1) provides a summary of our data, revealing the number of individuals arrested from each prominent ethnic group in the years 2020 and 2021. 

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: tbl-table1
#| tbl-cap: "Arrests by ethnic background for the year 2020, and 2021"
## Table 1: Total Number of Arrests
cleaned_data <- read.csv("../data/cleaned_data.csv")

table1 <- cleaned_data |> 
  group_by(arrest_year, perceived_race) |> 
  summarise(n = n(), .groups = "drop") |> 
  arrange(desc(n)) |> 
  pivot_wider(names_from = arrest_year, values_from = n, values_fill = 0)


kable(table1,
      align = "c",
      linesep = "",
      col.names = c("Ethinic and Identity Based Groups", "2020", "2021"),
      booktabs = TRUE)
```


### Booked after Arrest (Ethnic and Identity-Based Groups for Year 2020 and 2021)

Table 2 presents a data summary indicating the count of individuals from prominent ethnic groups who were "booked" in criminal cases post-arrest in the years 2020 and 2021. Due to the extensive nature of the dataset, encompassing nine different age groups across eight ethnicities, summarizing the information for clarity posed a challenge. Consequently, we have opted to showcase a subset of the data specifically focusing on the age group of 25 to 34 years for improved readability.

```{r}
#| warning: false
#| message: false
#| echo: false
#| tbl-cap: "Arrests Booked by ethnic background for the year 2020, and 2021"

## Table 2: Booked After Arrest
cleaned_data <- read.csv("../data/cleaned_data.csv")

table2 <- cleaned_data |>
  filter(booked == 1) |>
  group_by(arrest_year, perceived_race) |>
  summarise(n = n(), .groups = "drop") |>
  arrange(desc(n)) |>
  pivot_wider(names_from = arrest_year, values_from = n, values_fill = 0)

kable(table2,
      align = "c",
      linesep = "",
      col.names = c("Ethinic and Identity Based Groups", "2020", "2021"),
      booktabs = TRUE)
```



### Total number of arrests by age group for the year 2020 and 2021

Table 3 presents a data summary indicating the count of different age groups of individuals from prominent ethnic groups in the years 2020 and 2021. Due to the extensive nature of the dataset, encompassing nine different age groups across eight ethnicities, summarizing the information for clarity posed a challenge. Consequently, we have opted to showcase a subset of the data specifically focusing on the age group of 25 to 34 years for improved readability.

```{r}
#| warning: false
#| message: false
#| echo: false

## Table 3: Arrests by Age Group

cleaned_data <- read.csv("../data/cleaned_data.csv")
# 
# # Group 
table3 <- cleaned_data %>%
  group_by(arrest_year, perceived_race, age_group) %>%
  summarise(n = n(), .groups = "drop") %>%
  arrange(desc(perceived_race)) %>%
  pivot_wider(names_from = arrest_year, values_from = n, values_fill = 0)

table3_small <- cleaned_data %>%
  filter(age_group == "Aged 25 to 34 years") |>
  group_by(arrest_year, perceived_race, age_group) %>%
  summarise(n = n(), .groups = "drop") |>
  arrange(desc(n)) |>
  pivot_wider(names_from = arrest_year, values_from = n, values_fill = 0)

kable(table3_small,
      caption = "Arrests Booked by ethnic background for the year 2020, and 2021",
      align = "c",
      linesep = "",
      col.names = c("Ethinic and Identity Based Groups", "Age Group", "2020", "2021"),
      booktabs = TRUE)

```

We would like to acknowledge that opendatatoronto [@rOpenDataToronto] provides the distribution of the population by ethnicity. However, due to the vast size of Toronto and its numerous wards, it has been challenging to compare all the data and cross-verify it with our crime rate data comprehensively. Nevertheless, a more detailed analysis can be conducted by comparing specific ethnic groups with each other.


## Results
Now that we have cleaned the data, we can begin to analyze the data. The following section will provide a summary of the data, and the trends that emerge from the data. Figure 1, Figure 2, Figure 3, Figure 4 was created using `ggplot` [@rGgplot2], displays the information that can be used as compare the trends as described above.

### Number of Arrests in year 2020-2021
With reference to Table 1 and the graph plotted the data shows a non-uniform distribution of arrests across ethnic groups, with the Black ethnic group and White group exhibiting the highest numbers of arrests in both 2020 and 2021. Furthermore, the data indicates a decrease in the number of arrests for the top two ethnic groups from 2020 to 2021. However, a contrasting trend emerges for other ethnic groups, where the number of arrests has increased over the same time period. 

```{r}
#| warning: false
#| message: false
#| echo: false
#| eval: true
#| fig.cap: "Number of arrests by ethinic background for the year 2020, and 2021"
#| fig.width: 10
#| fig.height: 6
#| fig.align: 'center'
#| fig.pos: 'htb'

table1_long <- pivot_longer(table1, cols = c("2020", "2021"), names_to = "year", values_to = "value")

# Create a plot
ggplot(table1_long, aes(x = perceived_race, y = value, fill = year)) +
  geom_bar(stat = "identity", position = 'dodge') +
  labs(title = "Bar Chart for the number of arrests by ethinic background for the year 2020, and 2021",
       x = "Ethnic and Identity Based Groups",
       y = "Number of Arrests",
       fill = "Year") +
  theme_minimal() +
  scale_fill_discrete(labels = c("2020", "2021")) +
  theme(legend.position = "right") + 
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) + 
  scale_fill_brewer(palette = "Set1")
```

### Number of Arrests Booked in year 2020-2021
Referring to Table 2 and the plotted graph, the data illustrates a consistent distribution of the number of individuals booked after arrests across various ethnic groups. Notably, there is a higher count of individuals booked after arrest compared to those who were arrested but not booked for a criminal case. Additionally, it is observed that, across all ethnic groups, the percentage of individuals booked falls within the range of 50% to 55%, and this pattern remains consistent in the year 2021.

However, it is noteworthy that the Black ethnicity exhibits the highest number of individuals booked after arrest in both the years 2020 and 2021.

```{r}
#| warning: false
#| message: false
#| echo: false
#| eval: true
#| fig.cap: "Number of arrests booked by ethinic background for the year 2020, and 2021"
#| fig.width: 10
#| fig.height: 6
#| fig.align: 'center'
#| fig.pos: 'htb'

table2_long <-
  cleaned_data |>
  select(
    arrest_year,
    perceived_race,
    booked
  ) |>
  group_by(arrest_year, perceived_race, booked) %>%
  summarise(n = n(), .groups = "drop") %>%
  arrange(desc(perceived_race)) %>%
  filter(!(perceived_race == "None")) %>%
  pivot_wider(names_from = arrest_year, values_from = n, values_fill = 0)

table2_long <- pivot_longer(table2_long, cols = c("2020", "2021"), names_to = "year", values_to = "value")

ggplot(table2_long, aes(x = perceived_race, y = value, fill = factor(booked))) +
  geom_bar(stat = "identity", position = "fill") +
  facet_wrap(~ year, scales = "free_y") +
  labs(title = "Booked after Arrest in the year 2020 and 2021",
       x = "Perceived Race",
       y = "Percentage of Arrests Booked",
       fill = "Status") +
  theme_minimal() +
  theme(legend.position = "right") + 
  scale_fill_discrete(labels = c("Not Booked", "Booked")) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```


### Number of Arrests by Age Group for the year 2020-2021
As depicted in Figure 3, the data reveals a non-uniform distribution of arrests across age groups, with the age groups of 25 to 34 years and 35 to 44 years exhibiting the highest number of arrests in both 2020 and 2021. Furthermore, there is a notable decrease in the number of arrests for these top two age groups from 2020 to 2021. In contrast, a different trend emerges for other age groups, where the number of arrests has increased over the same time period.

Examining Figure 4, which illustrates the dot plot for the number of arrests by age group in the year 2020 and 2021 for the top two ethnic groups, "Black" and "White," it becomes evident that the age group 25 to 34 years represents the highest number of arrests for individuals of Black ethnicity. The trend for Black ethnicity indicates a decreasing curve from this age group onward. In contrast, for individuals of White ethnicity, the peak in arrests is observed in the age group 35 to 44 years. It is noteworthy that from age 45 to 65, the difference in the number of arrests between both ethnicities starts to converge.

```{r}
#| warning: false
#| message: false
#| echo: false
#| eval: true
#| fig.cap: "Number of arrests by Age-Group for the year 2020, and 2021"
#| fig.width: 10
#| fig.height: 6
#| fig.align: 'center'
#| fig.pos: 'htb'
# Bar plot

table3_long <- pivot_longer(table3, cols = c("2020", "2021"), names_to = "year", values_to = "value")

ggplot(table3_long, aes(x = perceived_race, y = value, fill = factor(age_group))) +
  geom_bar(stat = "identity") +
  facet_wrap(~ year, scales = "free_y") +
  labs(title = "Bar Chart for the number of arrests by Age-Group for the year 2020, and 2021",
       x = "Perceived Race",
       y = "Value",
       fill = "Year") +
  theme_minimal() +
  theme(legend.position = "right") + 
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

table3_ii <- table3 %>%
  filter(perceived_race %in% c("White", "Black")) %>%
  filter(!(age_group == "None")) %>%
  pivot_longer(cols = c("2020", "2021"), names_to = "year", values_to = "value")


# Create a line Graph
ggplot(table3_ii, aes(x = age_group, y = value, color = perceived_race)) +
  geom_point() + 
  geom_smooth(method = "loess", se = FALSE) +
  facet_wrap(~ year, scales = "free_y") +
  labs(title = "Scatter Plot for the number of arrests by Age-Group for the year 2021",
       x = "Age Group",
       y = "Value",
       color = "Perceived Race") +  # Change fill to color
  theme_minimal() +
  theme(legend.position = "right") +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))


```
## Discussion


## References



